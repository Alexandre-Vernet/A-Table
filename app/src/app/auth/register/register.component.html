<section>
    <div class="login-container">
        <div class="illustration">
            <img src="/icons/ios/1024.png" alt="Chef Hat">
        </div>
        <h1>À Table !</h1>
        <form [formGroup]="formSignUp" (ngSubmit)="signUp()">
            <div class="flex justify-content-center gap-2">
                <input formControlName="firstName" type="text" class="login-input" placeholder="Prénom">
                <input formControlName="lastName" type="text" class="login-input" placeholder="Nom">
            </div>
            <div class="login-field">
                <input formControlName="email" type="text" class="login-input" placeholder="Email">
                @if (formSignUp.controls.email.touched && formSignUp.controls.email.errors?.['email']) {
                    <p-message
                        severity="error" variant="simple" size="small">
                        L'email n'est pas valide
                    </p-message>
                }
                @if (formSignUp.hasError('invalidCredential')) {
                    <p-message severity="error" variant="simple"
                               size="small">
                        {{ formSignUp.getError('invalidCredential') }}
                    </p-message>
                }
                @if (formSignUp.hasError('error')) {
                    <p-message severity="error" variant="simple"
                               size="small">
                        {{ formSignUp.getError('error') }}
                    </p-message>
                }
            </div>
            <div class="login-field">
                <input formControlName="password" type="password" class="login-input" placeholder="Mot de passe">
                @if (formSignUp.controls.password.touched && formSignUp.controls.password.errors?.['minlength']) {
                    <p-message severity="error" variant="simple" size="small">
                        Le mot de passe doit contenir au moins 6 caractères
                    </p-message>
                }

                @if (formSignUp.hasError('passwordNotMatch') || formSignUp.controls.password.value.trim() !== formSignUp.controls.confirmPassword.value.trim()) {
                    <p-message severity="error" variant="simple" size="small">
                        Les mots de passe ne correspondent pas
                    </p-message>
                }
            </div>

            <div class="login-field">
                <input formControlName="confirmPassword" type="password" class="login-input"
                       placeholder="Confirmer le mot de passe">
            </div>
            <button class="button login-submit" [ngClass]="{
                    'disabled': formSignUp.invalid || formSignUp.controls.password.value !==  formSignUp.controls.confirmPassword.value
                    }"
                    [disabled]="formSignUp.invalid || formSignUp.controls.password.value !==  formSignUp.controls.confirmPassword.value">
                <span class="button-text">Inscription</span>
            </button>
        </form>
        <div class="signup-link">
            <a routerLink="/auth/login">
                <h3>Déjà membre ? Connectez-vous ici</h3>
            </a>
        </div>
    </div>
</section>
