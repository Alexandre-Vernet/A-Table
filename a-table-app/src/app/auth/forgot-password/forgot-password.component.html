<p-dialog header="Mot de passe oublié" [modal]="true" [(visible)]="showDialogForgotPassword"
          dismissableMask="true" (onHide)="closeModal()"
          [style]="{ width: '25rem' }">
    <span class="text-color-secondary block mb-5">
        Entrez votre email pour recevoir un mail de réinitialisation de mot de passe
    </span>
    <div class="mb-4">
        <p-floatlabel variant="on">
            <input class="w-full" [formControl]="email" pInputText id="email" autocomplete="off"/>
            <label for="email">Email</label>
            @if (email.touched && email.errors?.['email']) {
                <p-message
                    severity="error"
                    variant="simple" size="small">
                    L'email n'est pas valide
                </p-message>
            }
            @if (email.errors?.['EMAIL_NOT_FOUND']) {
                <p-message
                    severity="error"
                    variant="simple" size="small">
                    Cet email n'existe pas
                </p-message>
            }
            @if (email.errors?.['UNKNOWN_ERROR']) {
                <p-message
                    severity="error"
                    variant="simple" size="small">
                    Une erreur s'est produite lors de l'envoie du lien de réinitialisation du mot de passe
                </p-message>
            }
        </p-floatlabel>
    </div>
    <div class="flex justify-end gap-2">
        <p-button label="Annuler" severity="secondary" (click)="closeModal()"/>
        <p-button
            [ngClass]="{
                'disabled': email.invalid || !email.value
            }"
            [disabled]="email.invalid"
            [loading]="isLoading"
            label="Confirmer" (click)="resetPassword()"/>
    </div>
</p-dialog>
